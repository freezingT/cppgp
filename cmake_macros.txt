
macro(create_test TARGETNAME FILELIST)

    if(BUILD_TESTING)
        enable_testing()
        add_executable(${TARGETNAME}
            ${FILELIST}
        )
        target_link_libraries(
            ${TARGETNAME}
            Eigen3::Eigen
            GTest::gtest_main
            GTest::gmock_main
            libgp
        )

        include(GoogleTest)
        gtest_discover_tests(${TARGETNAME})
    endif()

endmacro()
